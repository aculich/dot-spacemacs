(defconst ag-org-packages '((org :location built-in)
                            org-pomodoro))

(defun org/init-org ()
  (use-package org
    :defer t
    :config
    (progn
      (setq
       org-startup-folded t
       org-log-into-drawer t
       org-M-RET-may-split-line '((headline))
       org-capture-templates
       '(("t" "Todo" entry (file (concat org-directory "/tasks.org"))
          "* TODO %t  %?\n\t%i\n")
         ("c" "Code Snippet" entry
          (file (concat org-directory "/tasks.org"))
          ;; Prompt for tag and language
          "* %t  %?\n\t%f\n\t#+BEGIN_SRC %^{language}\n\t\t%i\n\t#+END_SRC"))
       
       ort/prefix-arg-directory "~/org"
       org-agenda-files '("~/org/tasks.org")

       ;; reveal.js
       org-reveal-title-slide nil

       ;; for Chrome layer
       edit-server-default-major-mode 'org-mode)

      (require 'ox-md nil t)

      ;; To save the clock history across Emacs sessions, use
      (org-clock-persistence-insinuate)

      (spacemacs/toggle-mode-line-org-clock-on)

      (add-hook 'org-mode-hook 'flyspell-mode)

      (defun insert-current-date (arg)
        (interactive "P")
        (insert (if arg
                    (format-time-string "%d.%m.%Y")
                  (format-time-string "%Y-%m-%d")))))))

(defun org/init-org-pomodoro ()
  (use-package org-pomodoro
    :defer t
    :init
    (progn
      (global-set-key (kbd "C-x C-p") 'org-pomodoro)
      (global-set-key (kbd "C-x p") 'org-pomodoro)))
